<% if notifications.any? %>
  <% notifications.each do |notification| %>
    <div 
      class="<%= notification.unread? ? 'bg-blue-50' : 'bg-white' %> border-b border-gray-100 px-4 py-3 hover:bg-gray-50 transition-colors cursor-pointer"
      data-notification-id="<%= notification.id %>"
      onclick="window.location.href='<%= notification.action_url || '#' %>'"
    >
      <div class="flex items-start gap-3">
        <% if notification.unread? %>
          <div class="mt-1.5 h-2 w-2 rounded-full bg-blue-600 flex-shrink-0" data-unread-dot></div>
        <% else %>
          <div class="mt-1.5 h-2 w-2 flex-shrink-0"></div>
        <% end %>
        <div class="flex-1 min-w-0">
          <p class="text-sm font-medium text-gray-900"><%= notification.title %></p>
          <p class="text-xs text-gray-600 mt-1 line-clamp-2"><%= notification.message %></p>
          <p class="text-xs text-gray-400 mt-1">
            <%= time_ago_in_words(notification.created_at) %> ago
            <% if notification.organization %>
              â€¢ <%= notification.organization.name %>
            <% end %>
          </p>
        </div>
        <% if notification.unread? %>
          <button 
            type="button"
            class="ml-2 flex-shrink-0 text-gray-400 hover:text-gray-600"
            onclick="event.stopPropagation(); window.notificationsController?.markAsRead(<%= notification.id %>)"
            title="Mark as read"
          >
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-4 w-4">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </button>
        <% end %>
      </div>
    </div>
  <% end %>
<% else %>
  <div class="px-4 py-8 text-center">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-12 w-12 text-gray-400 mx-auto mb-3">
      <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75V8.25A6.75 6.75 0 104.5 8.25v1.5a8.967 8.967 0 01-2.311 6.022c1.733.64 3.56 1.085 5.454 1.31m7.214 0a24.255 24.255 0 01-7.214 0m7.214 0a3 3 0 11-6 0" />
    </svg>
    <p class="text-sm text-gray-500">No notifications</p>
  </div>
<% end %>

