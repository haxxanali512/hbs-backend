<div class="min-h-screen bg-gradient-to-br from-slate-50 to-blue-50">
  <!-- Modern Header -->
  <div class="bg-white/80 backdrop-blur-sm border-b border-gray-200/50 sticky top-0 z-10">
    <div class="px-6 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-3">
          <div class="w-10 h-10 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
          </div>
          <div>
            <h1 class="text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent">Document Signing</h1>
            <p class="text-sm text-gray-500">Complete your compliance requirements</p>
          </div>
        </div>
        <div class="flex items-center space-x-3">
          <div class="text-right">
            <p class="text-sm font-medium text-gray-900"><%= current_user.email %></p>
            <p class="text-xs text-gray-500">Account Manager</p>
          </div>
          <div class="w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center">
            <span class="text-white font-semibold text-sm"><%= current_user.email.first.upcase %></span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Main content -->
  <div class="max-w-6xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
    <!-- Progress indicator -->
    <div class="mb-8">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-3xl font-bold text-gray-900">Legal Documents</h2>
        <div class="flex items-center space-x-2 text-sm text-gray-500">
          <span>Step 3 of 4</span>
          <div class="w-16 h-1 bg-gray-200 rounded-full">
            <div class="w-12 h-1 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full"></div>
          </div>
        </div>
      </div>
      <p class="text-lg text-gray-600">Review and accept our terms of service and privacy policy to continue</p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
      <!-- Terms of Service -->
      <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-blue-100">
          <div class="flex items-center">
            <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-lg flex items-center justify-center mr-3">
              <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
              </svg>
            </div>
            <div>
              <h3 class="text-lg font-semibold text-gray-900">Terms of Service</h3>
              <p class="text-sm text-gray-600">Last updated: <%= Date.current.strftime("%B %d, %Y") %></p>
            </div>
          </div>
        </div>
        
        <div class="p-6 max-h-96 overflow-y-auto">
          <div class="prose prose-sm max-w-none">
            <h4 class="text-base font-semibold text-gray-900 mb-3">1. Acceptance of Terms</h4>
            <p class="text-sm text-gray-600 mb-4">
              By accessing and using our services, you accept and agree to be bound by the terms and provision of this agreement. 
              If you do not agree to abide by the above, please do not use this service.
            </p>

            <h4 class="text-base font-semibold text-gray-900 mb-3">2. Use License</h4>
            <p class="text-sm text-gray-600 mb-4">
              Permission is granted to temporarily download one copy of the materials on our platform for personal, 
              non-commercial transitory viewing only. This is the grant of a license, not a transfer of title.
            </p>

            <h4 class="text-base font-semibold text-gray-900 mb-3">3. Service Availability</h4>
            <p class="text-sm text-gray-600 mb-4">
              We strive to maintain high service availability but do not guarantee uninterrupted access. 
              We reserve the right to modify or discontinue the service at any time without notice.
            </p>

            <h4 class="text-base font-semibold text-gray-900 mb-3">4. User Responsibilities</h4>
            <p class="text-sm text-gray-600 mb-4">
              You are responsible for maintaining the confidentiality of your account and password. 
              You agree to accept responsibility for all activities that occur under your account.
            </p>

            <h4 class="text-base font-semibold text-gray-900 mb-3">5. Prohibited Uses</h4>
            <p class="text-sm text-gray-600 mb-4">
              You may not use our service for any unlawful purpose or to solicit others to perform unlawful acts. 
              You may not violate any international, federal, provincial, or state regulations, rules, laws, or local ordinances.
            </p>

            <h4 class="text-base font-semibold text-gray-900 mb-3">6. Termination</h4>
            <p class="text-sm text-gray-600 mb-4">
              We may terminate or suspend your account and bar access to the service immediately, without prior notice or liability, 
              under our sole discretion, for any reason whatsoever and without limitation.
            </p>

            <h4 class="text-base font-semibold text-gray-900 mb-3">7. Disclaimer</h4>
            <p class="text-sm text-gray-600 mb-4">
              The information on this service is provided on an "as is" basis. To the fullest extent permitted by law, 
              we exclude all representations, warranties, conditions and terms relating to our service.
            </p>

            <h4 class="text-base font-semibold text-gray-900 mb-3">8. Limitation of Liability</h4>
            <p class="text-sm text-gray-600 mb-4">
              In no event shall we, nor our directors, employees, partners, agents, suppliers, or affiliates, 
              be liable for any indirect, incidental, special, consequential, or punitive damages.
            </p>
          </div>
        </div>
      </div>

      <!-- Privacy Policy -->
      <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
        <div class="bg-gradient-to-r from-green-50 to-emerald-50 px-6 py-4 border-b border-green-100">
          <div class="flex items-center">
            <div class="w-8 h-8 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg flex items-center justify-center mr-3">
              <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
              </svg>
            </div>
            <div>
              <h3 class="text-lg font-semibold text-gray-900">Privacy Policy</h3>
              <p class="text-sm text-gray-600">Last updated: <%= Date.current.strftime("%B %d, %Y") %></p>
            </div>
          </div>
        </div>
        
        <div class="p-6 max-h-96 overflow-y-auto">
          <div class="prose prose-sm max-w-none">
            <h4 class="text-base font-semibold text-gray-900 mb-3">1. Information We Collect</h4>
            <p class="text-sm text-gray-600 mb-4">
              We collect information you provide directly to us, such as when you create an account, 
              use our services, or contact us for support. This may include your name, email address, and other contact information.
            </p>

            <h4 class="text-base font-semibold text-gray-900 mb-3">2. How We Use Your Information</h4>
            <p class="text-sm text-gray-600 mb-4">
              We use the information we collect to provide, maintain, and improve our services, 
              process transactions, send you technical notices and support messages, and communicate with you.
            </p>

            <h4 class="text-base font-semibold text-gray-900 mb-3">3. Information Sharing</h4>
            <p class="text-sm text-gray-600 mb-4">
              We do not sell, trade, or otherwise transfer your personal information to third parties without your consent, 
              except as described in this policy or as required by law.
            </p>

            <h4 class="text-base font-semibold text-gray-900 mb-3">4. Data Security</h4>
            <p class="text-sm text-gray-600 mb-4">
              We implement appropriate security measures to protect your personal information against unauthorized access, 
              alteration, disclosure, or destruction. However, no method of transmission over the internet is 100% secure.
            </p>

            <h4 class="text-base font-semibold text-gray-900 mb-3">5. Cookies and Tracking</h4>
            <p class="text-sm text-gray-600 mb-4">
              We use cookies and similar tracking technologies to collect and use personal information about you. 
              You can control cookies through your browser settings.
            </p>

            <h4 class="text-base font-semibold text-gray-900 mb-3">6. Your Rights</h4>
            <p class="text-sm text-gray-600 mb-4">
              You have the right to access, update, or delete your personal information. You may also opt out of certain 
              communications from us. Contact us to exercise these rights.
            </p>

            <h4 class="text-base font-semibold text-gray-900 mb-3">7. Data Retention</h4>
            <p class="text-sm text-gray-600 mb-4">
              We retain your personal information for as long as necessary to provide our services and fulfill the purposes 
              outlined in this policy, unless a longer retention period is required by law.
            </p>

            <h4 class="text-base font-semibold text-gray-900 mb-3">8. Changes to This Policy</h4>
            <p class="text-sm text-gray-600 mb-4">
              We may update this privacy policy from time to time. We will notify you of any changes by posting the new 
              policy on this page and updating the "Last updated" date.
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Acceptance Form -->
    <div class="mt-8 bg-white rounded-2xl shadow-lg border border-gray-100 p-8">
      <div class="text-center mb-6">
        <div class="w-16 h-16 bg-gradient-to-r from-yellow-100 to-orange-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <svg class="w-8 h-8 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
        </div>
        <h3 class="text-xl font-bold text-gray-900 mb-2">Document Acceptance</h3>
        <p class="text-gray-600">Please review the documents above and accept our terms to continue with your organization activation.</p>
      </div>

      <%= form_with url: tenant_activation_documents_path, method: :post, local: true, class: "space-y-6" do |form| %>
        <% if @compliance&.errors&.any? %>
          <div class="bg-red-50 border border-red-200 rounded-xl p-6">
            <div class="flex items-start">
              <div class="flex-shrink-0">
                <svg class="h-6 w-6 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
              </div>
              <div class="ml-3">
                <h4 class="text-sm font-semibold text-red-800">Please fix the following errors:</h4>
                <div class="mt-2 text-sm text-red-700">
                  <ul class="list-disc pl-5 space-y-1">
                    <% @compliance.errors.full_messages.each do |message| %>
                      <li><%= message %></li>
                    <% end %>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        <% end %>

        <div class="bg-blue-50 border border-blue-200 rounded-xl p-6">
          <div class="flex items-start">
            <div class="flex-shrink-0">
              <svg class="h-6 w-6 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </div>
            <div class="ml-3">
              <h4 class="text-sm font-semibold text-blue-800">Important Notice</h4>
              <div class="mt-2 text-sm text-blue-700">
                <p>By accepting these terms, you acknowledge that you have read, understood, and agree to be bound by our Terms of Service and Privacy Policy. This action will be recorded and cannot be undone.</p>
              </div>
            </div>
          </div>
        </div>

        <div class="space-y-4">
          <div class="flex items-start">
            <input id="accept-terms" name="organization_compliance[terms_of_use]" type="checkbox" class="h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mt-0.5" <%= 'checked' if @compliance&.terms_of_use? %> required>
            <label for="accept-terms" class="ml-3 text-sm text-gray-900">
              <span class="font-medium">I have read and agree to the Terms of Service</span>
              <span class="block text-gray-600 mt-1">I understand the terms and conditions outlined in the service agreement.</span>
              <% if @compliance&.terms_of_use? %>
                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 mt-2">
                  <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                  </svg>
                  Previously Accepted
                </span>
              <% end %>
            </label>
          </div>

          <div class="flex items-start">
            <input id="accept-privacy" name="organization_compliance[privacy_policy_accepted]" type="checkbox" class="h-5 w-5 text-green-600 focus:ring-green-500 border-gray-300 rounded mt-0.5" <%= 'checked' if @compliance&.privacy_policy_accepted? %> required>
            <label for="accept-privacy" class="ml-3 text-sm text-gray-900">
              <span class="font-medium">I have read and agree to the Privacy Policy</span>
              <span class="block text-gray-600 mt-1">I understand how my personal information will be collected, used, and protected.</span>
              <% if @compliance&.privacy_policy_accepted? %>
                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 mt-2">
                  <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                  </svg>
                  Previously Accepted
                </span>
              <% end %>
            </label>
          </div>

          <div class="flex items-start">
            <input id="accept-legal" name="accept_legal" type="checkbox" class="h-5 w-5 text-purple-600 focus:ring-purple-500 border-gray-300 rounded mt-0.5" required>
            <label for="accept-legal" class="ml-3 text-sm text-gray-900">
              <span class="font-medium">I confirm that I am authorized to accept these terms</span>
              <span class="block text-gray-600 mt-1">I have the legal authority to bind my organization to these agreements.</span>
            </label>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="flex items-center justify-between pt-6 border-t border-gray-200">
          <%= link_to tenant_activation_billing_path, class: "group inline-flex items-center px-6 py-3 text-gray-600 hover:text-gray-900 font-medium transition-colors duration-200" do %>
            <svg class="w-5 h-5 mr-2 group-hover:-translate-x-1 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
            Back to Previous Step
          <% end %>
          
          <div class="flex space-x-4">
            <%= form.submit "Accept & Continue", id: "accept-documents-btn", disabled: true, class: "group inline-flex items-center px-8 py-4 text-lg font-semibold text-white bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl shadow-lg hover:shadow-xl hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-500/50 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none transition-all duration-300 transform hover:scale-105" do %>
              <svg class="w-5 h-5 mr-3 group-hover:animate-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              Accept & Continue
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const acceptTermsCheckbox = document.getElementById('accept-terms');
  const acceptPrivacyCheckbox = document.getElementById('accept-privacy');
  const acceptLegalCheckbox = document.getElementById('accept-legal');
  const acceptButton = document.getElementById('accept-documents-btn');

  function validateForm() {
    const allChecked = acceptTermsCheckbox.checked && 
                      acceptPrivacyCheckbox.checked && 
                      acceptLegalCheckbox.checked;
    
    acceptButton.disabled = !allChecked;
    
    if (allChecked) {
      acceptButton.classList.remove('opacity-50', 'cursor-not-allowed', 'transform-none');
      acceptButton.classList.add('hover:scale-105');
    } else {
      acceptButton.classList.add('opacity-50', 'cursor-not-allowed', 'transform-none');
      acceptButton.classList.remove('hover:scale-105');
    }
  }

  // Add event listeners to all checkboxes
  acceptTermsCheckbox.addEventListener('change', validateForm);
  acceptPrivacyCheckbox.addEventListener('change', validateForm);
  acceptLegalCheckbox.addEventListener('change', validateForm);

  // Initial validation
  validateForm();
});
</script>
