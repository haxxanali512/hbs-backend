<div class="bg-white shadow rounded-md p-6">
  <%= form_with model: [ :admin, diagnosis_code ], local: true do |f| %>
    <% if diagnosis_code.errors.any? %>
      <div class="mb-4 text-red-700 bg-red-100 border border-red-200 rounded p-3">
        <p class="font-semibold mb-1">Please fix the following errors:</p>
        <ul class="list-disc list-inside text-sm">
          <% diagnosis_code.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <%= f.label :code, class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= f.text_field :code, class: "w-full border rounded px-3 py-2" %>
      </div>
      <div>
        <%= f.label :status, class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= f.select :status, DiagnosisCode.statuses.keys.map { |s| [s.humanize, s] }, {}, class: "w-full border rounded px-3 py-2" %>
      </div>
      <div class="md:col-span-2">
        <%= f.label :description, class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= f.text_area :description, rows: 3, class: "w-full border rounded px-3 py-2" %>
      </div>
      <div>
        <%= f.label :effective_from, class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= f.date_field :effective_from, class: "w-full border rounded px-3 py-2" %>
      </div>
      <div>
        <%= f.label :effective_to, class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= f.date_field :effective_to, class: "w-full border rounded px-3 py-2" %>
      </div>
    </div>

    <div class="flex justify-end space-x-2 mt-6">
      <%= link_to "Cancel", (diagnosis_code.new_record? ? admin_diagnosis_codes_path : admin_diagnosis_code_path(diagnosis_code)), class: "px-4 py-2 rounded bg-gray-100" %>
      <%= f.submit (diagnosis_code.new_record? ? "Create" : "Update"), class: "px-4 py-2 rounded bg-blue-600 text-white" %>
    </div>
  <% end %>
</div>


