<%= form_with model: [:admin, payer], local: true do |f| %>
  <% if payer.errors.any? %>
    <div class="mb-4 bg-red-50 border border-red-200 rounded-md p-4 text-sm text-red-700">
      <%= payer.errors.full_messages.join(', ') %>
    </div>
  <% end %>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div>
      <%= f.label :name, "Name", class: "block text-sm font-medium text-gray-700 mb-1" %>
      <%= f.text_field :name, class: "w-full border border-gray-300 rounded-md px-3 py-2" %>
    </div>

    <div>
      <%= f.label :payer_type, "Payer Type", class: "block text-sm font-medium text-gray-700 mb-1" %>
      <%= f.select :payer_type, options_for_select(Payer.payer_types.keys.map { |k| [k.humanize, k] }, payer.payer_type), {}, class: "w-full border border-gray-300 rounded-md px-3 py-2" %>
    </div>

    <div>
      <%= f.label :hbs_payer_key, "HBS Payer Key", class: "block text-sm font-medium text-gray-700 mb-1" %>
      <%= f.text_field :hbs_payer_key, class: "w-full border border-gray-300 rounded-md px-3 py-2 font-mono" %>
    </div>

    <div>
      <%= f.label :status, "Status", class: "block text-sm font-medium text-gray-700 mb-1" %>
      <%= f.select :status, options_for_select(Payer.statuses.keys.map { |k| [k.humanize, k] }, payer.status), {}, class: "w-full border border-gray-300 rounded-md px-3 py-2" %>
    </div>

    <div>
      <%= f.label :id_namespace, "ID Namespace", class: "block text-sm font-medium text-gray-700 mb-1" %>
      <%= f.select :id_namespace, options_for_select(Payer.id_namespaces.keys.map { |k| [k.humanize, k] }, payer.id_namespace), { include_blank: true }, class: "w-full border border-gray-300 rounded-md px-3 py-2" %>
    </div>

    <div>
      <%= f.label :national_payer_id, "National Payer ID", class: "block text-sm font-medium text-gray-700 mb-1" %>
      <%= f.text_field :national_payer_id, class: "w-full border border-gray-300 rounded-md px-3 py-2" %>
    </div>

    <div>
      <%= f.label :state_scope, "State Scope (comma-separated)", class: "block text-sm font-medium text-gray-700 mb-1" %>
      <%= f.text_field :state_scope, value: payer.state_scope&.join(', '), class: "w-full border border-gray-300 rounded-md px-3 py-2" %>
      <p class="text-xs text-gray-500 mt-1">Empty = national. Example: CA, NY</p>
    </div>

    <div>
      <%= f.label :contact_url, "Contact URL", class: "block text-sm font-medium text-gray-700 mb-1" %>
      <%= f.url_field :contact_url, class: "w-full border border-gray-300 rounded-md px-3 py-2" %>
    </div>

    <div>
      <%= f.label :support_phone, "Support Phone", class: "block text-sm font-medium text-gray-700 mb-1" %>
      <%= f.telephone_field :support_phone, class: "w-full border border-gray-300 rounded-md px-3 py-2" %>
    </div>

    <div class="md:col-span-2">
      <%= f.label :notes_internal, "Internal Notes", class: "block text-sm font-medium text-gray-700 mb-1" %>
      <%= f.text_area :notes_internal, rows: 3, class: "w-full border border-gray-300 rounded-md px-3 py-2" %>
    </div>
  </div>

  <div class="flex justify-end mt-6">
    <%= link_to "Cancel", admin_payers_path, class: "px-4 py-2 border border-gray-300 rounded-md text-sm text-gray-700 bg-white hover:bg-gray-50" %>
    <%= f.submit payer.persisted? ? "Update Payer" : "Create Payer", class: "ml-2 px-4 py-2 rounded-md text-sm text-white bg-indigo-600 hover:bg-indigo-700" %>
  </div>
<% end %>


