c
q
has_global_access?
current_user&.super_admin?
current_user
c
n
@current_organization
n
Organization.find_by(subdomain: subdomain)
subdomain
n
c
cc
c
current_user&.organization_memberships&.active&.find_by(organization: current_organization)
current_organization
current_user
q
c
@current_organization = session_org
subdomain_matches = Rails.env.production? ? request.subdomain == session_org.subdomain : request.host.include?("#{session_org.subdomain}.")
subdomain_matches = if Rails.env.production?
session_org && current_user.member_of?(session_org)
session_org = Organization.find_by(id: session[:current_organization_id])
session[:current_organization_id]
current_user.super_admin? && [ "www", "admin", "" ].include?(request.subdomain)
user_signed_in?
c
requestc
request
request.subdomain
request.subdomain == session_org.subdomain
session_org = Organization.find_by(id: session[:current_organization_id])
session[:current_organization_id]
current_user.super_admin? && [ "www", "admin", "" ].include?(request.subdomain)
user_signed_in?
c
q
c
response
n
c
csv_content
n
